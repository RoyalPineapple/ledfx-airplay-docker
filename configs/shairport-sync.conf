// Shairport Sync configuration for Airglow (AirPlay âžœ LedFX PulseAudio bridge)
// Fixed-volume AirPlay endpoint feeding LedFX's Pulse sink via shared socket
// Uses soxr interpolation for high-quality resampling
//
// For advanced configuration options, see:
// https://github.com/mikebrady/shairport-sync/blob/master/scripts/shairport-sync.conf

general =
{
	// AirPlay device name (appears in iOS/macOS AirPlay menu)
	name = "Airglow";
	
	// Enable verbose logging (1 = normal, 2 = more verbose, 3 = very verbose)
	verbose = 1;
	
	// Output backend: PulseAudio (pa)
	output_backend = "pa";
	
	// High-quality audio interpolation
	interpolation = "soxr";
	
	// Ignore volume control from AirPlay source (fixed volume output)
	// This ensures consistent audio levels for LED visualization
	ignore_volume_control = "yes";
};

pa =
{
	// PulseAudio server socket (shared with LedFX container)
	server = "unix:/pulse/pulseaudio.socket";
	
	// PulseAudio authentication cookie
	cookie = "/pulse/cookie";
};

sessioncontrol =
{
	// Hook into ALL available events to see which ones fire
	run_this_before_play_begins = "/hooks/ledfx-session-hook.sh start play_begins";
	run_this_after_play_ends = "/hooks/ledfx-session-hook.sh stop play_ends";
	run_this_before_entering_active_state = "/hooks/ledfx-session-hook.sh start active_state";
	run_this_after_exiting_active_state = "/hooks/ledfx-session-hook.sh stop exit_active";
	
	// Wait for the script to finish so logs stay ordered
	wait_for_completion = "yes";

	// Treat short gaps (seconds) as part of the same session
	session_timeout = 4.0;
};

diagnostics =
{
	// Enable statistics logging
	statistics = "yes";
	
	// Log verbosity level
	log_verbosity = 1;
};

